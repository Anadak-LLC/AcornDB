# v0.5.0 Release Status & Implementation Plan

**Updated:** November 10, 2025
**Build Status:** ✅ SUCCESS (0 errors, 104 warnings)
**Overall Status:** 3 critical items remaining

---

## Progress Summary

### ✅ Completed Items

1. **Build Errors Fixed** (13 errors → 0 errors)
   - Fixed missing `where T : class` constraints on partial Tree classes
   - Fixed generic method constraints in benchmarks, tests, demos
   - Solution now builds cleanly

2. **IndexExtensions Documentation** ✅ DONE
   - Added `[Experimental]` attribute to IndexExtensions class
   - Added comprehensive XML documentation with `<exception>` tags
   - Updated README with "Not Yet Implemented" section
   - Users now have clear warnings about advanced index features

3. **Git Status Clean** ✅ DONE
   - Deleted Canopy/Hardwood files no longer tracked
   - Repository is clean (no uncommitted deletions)

4. **README Sync Status** ✅ DONE
   - Added "⚠️ Not Yet Implemented" section
   - Documented network sync limitations
   - Clarified which features work vs. planned

### ⚠️ Outstanding Critical Items (3 items)

#### 1. Five Trunks Missing TrunkBase Migration ⚠️ HIGH PRIORITY

**Status:** NOT STARTED
**Estimate:** 3-4 hours
**Impact:** Users cannot use compression/encryption/policy with these trunks

**Files Requiring Migration:**
- `AcornDB.Persistence.Cloud/DynamoDbTrunk.cs` - AWS DynamoDB
- `AcornDB.Persistence.Cloud/AzureTableTrunk.cs` - Azure Table Storage
- `AcornDB.Persistence.DataLake/ParquetTrunk.cs` - Apache Parquet
- `AcornDB.Persistence.DataLake/TieredTrunk.cs` - Hot/Cold tiering
- `AcornDB/Git/GitHubTrunk.cs` - Git-backed storage

**Current State:**
```csharp
// All 5 trunks have this stub:
public void AddRoot(IRoot root) { /* TODO: Implement root support */ }
public bool RemoveRoot(string name) => false;
public IReadOnlyList<IRoot> Roots => Array.Empty<IRoot>();
```

**What Needs to Happen:**
1. Change from `ITrunk<T>` to extend `TrunkBase<T>`
2. Remove duplicate batching code (if present)
3. Remove stub AddRoot/RemoveRoot/Roots implementations
4. Implement abstract methods from TrunkBase
5. Test with IRoot pipeline (compression, encryption, policy)

**Decision Required:**
- Option A: **Migrate all 5 trunks** (RECOMMENDED - 3-4 hours work)
- Option B: **Document limitation** and mark stub methods as `[Obsolete]` (30 min)
- Option C: **Exclude from v0.5.0** (breaking change)

---

#### 2. Advanced Index Methods Need [Obsolete] Warnings ⚠️ MEDIUM PRIORITY

**Status:** PARTIALLY DONE
**Estimate:** 10 minutes
**Impact:** IDE warnings would help developers avoid these methods

**What's Done:**
- ✅ Class-level `[Experimental]` attribute
- ✅ XML documentation with `<exception>` tags
- ✅ README documentation

**What's Missing:**
- ❌ Method-level `[Obsolete]` attributes for IDE warnings

**Recommendation:** Add `[Obsolete]` to individual methods:

```csharp
[Obsolete("Composite indexes not yet implemented. Planned for v0.6.0 (Phase 4.1). Use WithIndex() for scalar indexes.", false)]
public static Acorn<T> WithCompositeIndex<T>(...) { ... }
```

---

#### 3. Minor Polish Items ⚠️ LOW PRIORITY

**3a. Git SquashCommits Not Implemented**
- File: `AcornDB/Git/LibGit2SharpProvider.cs:170`
- Impact: LOW (advanced Git feature, rarely used)
- Fix: Mark as `[Obsolete]` (5 minutes)

**3b. ManagedIndexRoot Migration Guide**
- File: `AcornDB/Storage/Roots/ManagedIndexRoot.cs`
- Impact: LOW (already has [Obsolete] attribute)
- Fix: Add migration section to README (20 minutes)

**3c. Console.WriteLine in Production**
- Occurrences: 50+ instances
- Impact: MEDIUM (production logging concern)
- Fix: Add config flag to disable console output (1 hour)
- Alternative: Document as known limitation for v0.5.0, fix in v0.5.1

---

## Implementation Plan

### Phase 1: Critical Trunk Migration (3-4 hours)

**Recommended Approach:** Migrate all 5 trunks to TrunkBase

**Order of Implementation:**
1. **GitHubTrunk** (30-40 min) - Most used, good reference implementation
2. **DynamoDbTrunk** (40-50 min) - Already has batching, needs cleanup
3. **AzureTableTrunk** (40-50 min) - Similar to DynamoDB
4. **ParquetTrunk** (40-50 min) - Data lake use case
5. **TieredTrunk** (30-40 min) - Delegating trunk, simpler

**Per-Trunk Migration Steps:**
1. Read current implementation (5 min)
2. Change class declaration to extend TrunkBase<T> (2 min)
3. Enable batching in constructor if needed (5 min)
4. Remove duplicate IRoot stub code (2 min)
5. Implement `WriteToStorageAsync()` abstract method (15 min)
6. Implement `WriteBatchToStorageAsync()` if batching enabled (15 min)
7. Update synchronous methods to call async versions (5 min)
8. Test build and fix any compilation errors (5 min)
9. Manual smoke test (5 min)

**Total Estimated Time:** 3-4 hours

---

### Phase 2: Polish & Documentation (1 hour)

**Tasks:**
1. Add `[Obsolete]` to advanced index methods (10 min)
2. Add `[Obsolete]` to SquashCommits (5 min)
3. Add ManagedIndexRoot migration guide to README (20 min)
4. Update v0.5.0_RELEASE_BLOCKERS.md with final status (10 min)
5. Run full solution build and tests (10 min)
6. Create final release notes (15 min)

**Total Estimated Time:** 1 hour

---

### Phase 3: Optional Items (Defer to v0.5.1)

**These can wait for v0.5.1:**
- Console.WriteLine → ILogger abstraction (1-2 hours)
- Null-return pattern standardization (2-3 hours)
- Empty catch block logging (1 hour)

---

## Release Decision Matrix

| Scenario | Status | Recommendation |
|----------|--------|---------------|
| **Complete Phase 1 + 2** | Best case | ✅ **SHIP v0.5.0** (Grade: A-) |
| **Complete Phase 1 only** | Good case | ✅ **SHIP v0.5.0** (Grade: B+) |
| **Document limitations** | Acceptable | ✅ **SHIP v0.5.0** (Grade: B) |
| **Skip Phase 1** | Not recommended | ⚠️ **Delay to v0.5.1** |

---

## Risk Assessment

### Low Risk (Recommended Path)
- Complete trunk migrations following proven TrunkBase pattern
- Pattern already works for 10 other trunks
- Each trunk is isolated - low regression risk

### Medium Risk (Alternative Path)
- Document limitations and ship with stubs
- Users may be confused why features don't work
- Creates technical debt for v0.5.1

### High Risk (Not Recommended)
- Ship without documentation or fixes
- Production users will hit NotImplementedExceptions
- Poor user experience

---

## Time Investment Summary

| Phase | Time | Value |
|-------|------|-------|
| Phase 1: Trunk Migration | 3-4 hours | HIGH - Enables core features |
| Phase 2: Polish | 1 hour | MEDIUM - Better UX |
| Phase 3: Optional | 4-6 hours | LOW - Can defer |
| **TOTAL (Phases 1+2)** | **4-5 hours** | **Ready to ship** |

---

## Recommendation

**PROCEED with Phase 1 + Phase 2**

**Rationale:**
1. TrunkBase pattern is proven (10 trunks already migrated)
2. 4-5 hours investment enables core features for all trunks
3. Architectural consistency is important for v0.5.0
4. Users expect compression/encryption to work across all storage backends
5. Technical debt would carry forward and compound

**Alternative (if time-constrained):**
- Document stub implementations clearly in README
- Add `[Obsolete]` warnings on stub methods
- Commit to completing migrations in v0.5.1 (1-2 weeks)

---

## Next Steps

**Option A: Full Implementation (Recommended)**
1. Start with GitHubTrunk migration (easiest)
2. Complete remaining 4 trunks
3. Run full test suite
4. Complete Phase 2 polish
5. Tag v0.5.0 release

**Option B: Document & Ship**
1. Add `[Obsolete]` to stub AddRoot methods
2. Update README with limitation details
3. Complete Phase 2 polish items
4. Tag v0.5.0 release
5. Schedule Phase 1 for v0.5.1

**Decision Point:** Which path should we take?

---

**Bottom Line:** AcornDB is production-ready for 90% of use cases. The remaining 4-5 hours of work would make it production-ready for 100% of use cases.
